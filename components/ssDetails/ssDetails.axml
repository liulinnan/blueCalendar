<view class="ss-details details-containner">
  <scroll-view class="scroll-container" scroll-y="true" 
    lower-threshold="500" onScrollToLower="scrollMytrip">
    <view a:for="{{ssList}}" style="border-bottom: 20rpx solid #f7f7f7">
      <view class="ss-user-data clearfix">
        <image class="fl" mode="scaleToFill" src="{{item[3]?item[3]:'/images/ss-default-head.png'}}"/>
        <view class="user-name fl">
          <text class="name">{{item[2]}}</text>
          <view>{{item[4].split(" ")[0]}} <text class="text-overflow">{{item[10]}}</text></view>
        </view>
        <button class="fr" style="color: {{item[27] == 1 ? '#999' : '#0e61d9'}}"  data-otheruserid="{{item[1]}}" data-state="{{item[27]}}" 
        data-index="{{index}}" onTap="followState">{{item[27] == 1 ? 'å·²'  : '+ '}}å…³æ³¨</button>
      </view>
      <view class="swiper-container">
        <swiper
          autoplay="{{autoplay}}"
          interval="{{interval}}"
          circular="{{circular}}"
        >
          <block a:for="{{item[20]}}" a:for-item="imgList" a:for-index="idx">
            <swiper-item key="swiper-item-{{imgList.index}}">
              <image src="{{item[26]+imgList.replace('/ico','')}}" 
                data-index="{{idx}}" 
                data-imgUrl="{{item[26]}}" 
                data-list="{{item[20]}}" 
                onTap="previewImage" 
                mode="aspectFit" 
                style="display: block"/>
                <view class="indicator-dots"><text>{{idx+1}}</text>/{{item[20].length}}</view>
            </swiper-item>
          </block>  
        </swiper>
      </view>
      <view class="ss-content">
        <text class="ss-content-intor">
          <!-- <text>{{item[19].replace(/ğŸŒ/g,'\n')}}</text>  -->
          <text>{{item[19].replace(/ğŸŒ/g,'\n')}}</text>
        </text>
        <!-- ssè¯„è®º/ç‚¹èµæ•°é‡ -->
        <view class="ss-comment-like">
          <view onTap="openComment" data-parentuserid="{{item[1]}}" data-ssId="{{item[0]}}">
            <image mode="scaleToFill" src="/images/icon-ss-comment.png"/>
            <text>{{item[9]}}</text>
          </view>
          <view onTap="getLikeState" data-ssId="{{item[0]}}"  data-index="{{index}}" data-state="{{item[12]}}">
            <image mode="scaleToFill" src="{{item[12] == 1 ? '/images/icon-ss-like.png' : '/images/icon-ss-unlike.png'}}"/>
            <text>{{item[7]}}</text>
          </view>
        </view>
        <!-- ssè¯¦æƒ… -->
        <view class="ss-content-data" data-ssId="{{item[0]}}" data-ssUserId="{{item[1]}}" onTap="jumpSSDetail">
          <view class="ss-label clearfix">
            <text class="fl">æ ‡ç­¾ï¼š</text>
            <button a:for="{{item[28]}}" a:for-item="tagList">{{tagList}}</button>
          </view>
          <view>ä½ç½®ï¼š<text>{{item[10]}}</text></view>
          <view>æ—¶é—´ï¼š<text>{{item[4]}}</text></view>
          <!-- <view>é˜…è¯»ï¼š<text>{{item[6]}}æ¬¡</text></view> -->
        </view>
        <!-- è¯„è®º/ç‚¹èµ 0:plå†…å®¹ 1plç”¨æˆ·id 2plåå­— 3è¢«plç”¨æˆ·id 4è¢«plåå­— 5plç”¨æˆ·å¤´åƒ-->
        <view class="ss-content-news">
          <view class="ss-reply" a:for="{{item[21]}}" a:for-item="commentList">
            <image mode="scaleToFill" src="{{commentList[5]?commentList[5]:'/images/ss-default-head.png'}}"/>
            <text>{{commentList[2]}}</text>
            <!-- è¯„è®ºå†…å®¹ -->
            <view class="ss-reply-flex" a:if="{{(commentList[0].indexOf('â™¥ï¸') >= 0)}}"> 
              <image class="icon-thumbs-up" mode="scaleToFill" src="/images/icon-thumbs-up.png"/>
            </view>
            <view a:elif="{{commentList[4]}}" >
              å›å¤ï¼š{{commentList[4]}}
            </view>
            <!-- å†…å®¹ -->
            <text style="margin-left: {{(commentList[0].indexOf('â™¥ï¸') >= 0) ? '0' : '32rpx'}}" class="reply">{{(commentList[0].indexOf('â™¥ï¸') >= 0) ? (commentList[0].split("â™¥ï¸")[1]) : commentList[0]}}</text> 
          </view>

          <view class="comment-container">
            <view class="comment-input">
              <image mode="scaleToFill" src="/images/icon-comment.png"/>
              <input
                type="text"
                class="comment-cls"
                placeholder-class="pd-cls"
                placeholder="å–œæ¬¢å°±è¯„è®ºä¸€ä¸‹å§"
                data-ssId="{{item[0]}}"
                data-ssUserId="{{item[1]}}"
                data-index="{{index}}"
                value="{{listComment}}"
                confirm-type="send"
                onConfirm="commentSub"
              />
            </view>
            <!-- <text a:if="{{item[9] > 9}}" onTap="openComment">æŸ¥çœ‹å…¨éƒ¨10æ¡è¯„è®º</text> -->
             <text onTap="openComment" a:if="{{item[21].length > 0}}" data-parentuserid="{{item[1]}}" data-ssId="{{item[0]}}">æŸ¥çœ‹å…¨éƒ¨{{item[9] > 0 ? item[9] : item[21].length}}æ¡è¯„è®º</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
  <!-- è¯„è®ºå¼¹çª— -->
  <scroll-view class="ss-details alert-container" a:if="{{alertState}}" scroll-y="{{true}}" 
    lower-threshold="200" onScrollToLower="scrollComment">
    <view class="popup-box">
      <view class="popup-title">
        <text></text>
        <text>{{commentNumber}}æ¡è¯„è®º</text>
        <view class="close" onTap="closeAlert">
          <am-icon type="cross" size="14px" color="#000" />
        </view>
      </view>
      <view class="comment-container">
        <view class="user-comment" a:for="{{commentList}}" data-parentid="{{item[0]}}"
          data-parentuserid="{{item[2]}}" data-rootid="{{item[0]}}" data-name="{{item[3]}}" onTap="commentUserData">
          <image class="user-head" mode="scaleToFill" src="{{item[4]}}"/>
          <view class="user-data">
            <text>{{item[3]}}</text>
            <view class="like">
              <image a:if="{{(item[1].indexOf('â™¥ï¸') >= 0)}}" 
                class="icon-thumbs-up" mode="scaleToFill" src="/images/icon-thumbs-up.png"/>
                {{(item[1].indexOf('â™¥ï¸') >= 0) ? (item[1].split("â™¥ï¸")[1]) : item[1]}}
            </view>
            <view class="reply">{{item[5]}}<text class="com-btn">å›å¤</text></view>
            <view class="comment-reply" a:if="{{item[7].length > 0}}">
              <view class="clearfix" a:for="{{item[7]}}" a:for-item="comList">
                <text class="fl">{{comList[3]}}</text>
                <view class="fl" a:if="{{comList[6] != '0'}}"  style="display: flex;">
                  <text class="com-btn">å›å¤</text>
                  <text>{{comList[10]}}ï¼š</text>
                </view>
                <text class="fl">{{comList[1]}}</text>
              </view>
            </view>
          </view>
        </view>
        <view a:if="{{showAllTap && commentNumber > 0}}" class="comment-tap">
          <text>å·²æ˜¾ç¤ºå…¨éƒ¨è¯„è®º</text>
        </view>
      </view>
    </view>
  </scroll-view>
  <view class="comment-all" a:if="{{showInput}}">
    <input
      type="text"
      enableNative="{{false}}"
      value="{{detailsComment}}"
      class="comment-cls"
      placeholder-class="pd-cls"
      placeholder="{{userName}}"
      confirm-type="none"
      onInput="getCommentVal"
      onConfirm="closeKeyboard"
    />
    <button size="default" onTap="commentListSub">å‘é€</button>
  </view>
</view>